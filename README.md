# Multi-threaded Array Processing

## Постановка задачи

Программа реализует консольный процесс с тремя потоками, выполняющими различные операции над массивом целых чисел:

### Потоки и их функционал

**Поток main**:
1. Создает массив целых чисел (размер и элементы вводятся с консоли)
2. Создает потоки `min_max` и `average`
3. Ожидает завершения работы созданных потоков
4. Заменяет минимальный и максимальный элементы массива на среднее значение
5. Выводит модифицированный массив на консоль
6. Завершает работу программы

**Поток min_max**:
1. Находит минимальный и максимальный элементы массива
2. Выводит найденные значения на консоль
3. После каждого сравнения элементов приостанавливает работу на 7 мс (использует `Sleep(7)`)

**Поток average**:
1. Вычисляет среднее арифметическое элементов массива
2. Выводит полученное значение на консоль
3. После каждой операции суммирования приостанавливает работу на 12 мс (использует `Sleep(12)`)

## Используемые инструменты

### Система сборки
- **CMake** - для управления процессом сборки проекта
- Минимальная требуемая версия: 3.10

### Тестирование
- **Google Test (gtest)** - для модульного тестирования
- Тесты покрывают:
  - Корректность нахождения min/max значений
  - Правильность вычисления среднего значения
  - Проверку модификации массива
  - Обработку пограничных случаев (пустой массив, одинаковые элементы)

### Компилятор
- Поддерживаются современные компиляторы C++ (MSVC, GCC, Clang)
- Требуется поддержка стандарта C++17 или новее
- Необходима поддержка многопоточности (std::thread)

### Платформа
- Изначально разработано для Windows (использование WinAPI функций Sleep и WaitForSingleObject)
- Может быть портировано на другие платформы с заменой функций работы с потоками и таймерами

## Сборка и запуск

1. Создайте директорию для сборки:
   ```bash
   mkdir build
   cd build
   ```

2. Запустите CMake:
   ```bash
   cmake ..
   ```

3. Соберите проект:
   ```bash
   cmake --build .
   ```

4. Запустите программу:
   ```bash
   ./array_processor
   ```

## Структура проекта

```
array_processor/
├── CMakeLists.txt          # Основной файл конфигурации CMake
├── include/                # Заголовочные файлы
│   ├── array_processor.h   # Основные функции обработки массива
│   ├── min_max.h           # Функции для потока min_max
│   ├── average.h           # Функции для потока average
│   └── thread_utils.h      # Вспомогательные функции для работы с потоками
├── src/                    # Исходные файлы
│   ├── main.cpp            # Основная программа (поток main)
│   ├── min_max.cpp         # Реализация потока min_max
│   ├── average.cpp         # Реализация потока average
│   └── array_processor.cpp # Реализация функций обработки массива
├── test/                   # Тесты
│   ├── CMakeLists.txt      # Конфигурация тестов
│   ├── test_min_max.cpp    # Тесты для потока min_max
│   ├── test_average.cpp    # Тесты для потока average
│   └── test_main.cpp       # Тесты для основного потока
└── README.md               # Этот файл
```

## Особенности реализации

1. **Синхронизация потоков**:
   - Используется `WaitForSingleObject` с параметром `INFINITE` для ожидания завершения потоков
   - Для имитации "тяжелых" вычислений используются задержки `Sleep`

2. **Обработка ввода**:
   - Программа проверяет корректность вводимых данных
   - Обрабатывает случаи пустого массива или массива с одним элементом

3. **Вывод результатов**:
   - Четкое форматирование вывода для удобства чтения
   - Пошаговый вывод информации о работе потоков

4. **Кроссплатформенность**:
   - Основная логика написана на стандартном C++
   - Платформозависимые вызовы изолированы для упрощения портирования
